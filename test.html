<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame Triangle Animation</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
        // Custom component for moving triangles
        AFRAME.registerComponent('move-triangle', {
            schema: {
                speed: {type: 'number', default: 0.02},
                direction: {type: 'string', default: 'up'},
            },
            init: function () {
                this.el.setAttribute('geometry', {
                    primitive: 'triangle',
                    vertexA: '0 1 0',
                    vertexB: '-0.5 -0.5 0',
                    vertexC: '0.5 -0.5 0'
                });
                this.el.setAttribute('material', 'color', '#FF0000');
                this.originalScale = this.el.getAttribute('scale');
                this.shrinking = false;

                this.el.addEventListener('mouseenter', () => {
                    this.shrinking = true;
                });
            },
            tick: function (time, timeDelta) {
                if (this.shrinking) {
                    let scale = this.el.getAttribute('scale');
                    if (scale.x > 0) {
                        this.el.setAttribute('scale', {
                            x: scale.x - 0.01,
                            y: scale.y - 0.01,
                            z: scale.z - 0.01
                        });
                    } else {
                        this.el.parentNode.removeChild(this.el);  // Remove triangle when fully shrunk
                    }
                } else {
                    let position = this.el.getAttribute('position');
                    this.el.setAttribute('position', {
                        x: position.x,
                        y: position.y,
                        z: position.z + this.data.speed  // Move towards the camera
                    });
                }
            }
        });

        // Function to generate random triangles in a stream
        function createTriangleStream(sceneEl, xPos, direction) {
            for (let i = 0; i < 20; i++) {
                let triangle = document.createElement('a-entity');
                triangle.setAttribute('move-triangle', `speed: ${0.02 + Math.random() * 0.03}; direction: ${direction}`);
                triangle.setAttribute('position', `${xPos} ${Math.random() * 4 - 2} ${Math.random() * -20}`);
                sceneEl.appendChild(triangle);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const sceneEl = document.querySelector('a-scene');
            createTriangleStream(sceneEl, -0.5, 'up');   // Left stream
            createTriangleStream(sceneEl, 0.5, 'down');  // Right stream
        });
    </script>
</head>
<body>
    <a-scene>
        <a-sky color="#ECECEC"></a-sky>
        <a-camera position="0 1.6 0"></a-camera>
    </a-scene>
</body>
</html>
