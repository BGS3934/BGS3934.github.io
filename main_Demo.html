<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Sandbox</title>
    <!-- Adds aframe core functionality for building VR scenes -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <!-- Allows objects to react to events like clicks -->
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
    <!-- Adds support for animated 3D models (GLB files) -->
    <script src="https://unpkg.com/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <!-- Adds VR controller thumbstick movement support -->
    <script src="thumbstick-move.js"></script>
  </head>
  <body>
    <!-- Main VR scene container -->
    <a-scene>

      <!-- Start background sound loop -->
     <a-entity sound="src: url(Sounds/marina.mp3); autoplay: true; loop: true; volume: 0.5; positional: false"></a-entity>s

      <!-- Camera rig wrapper (This is an assembly of hands and head controls to allow both VR and keyboard / mouse control) -->
      <a-entity id="cameraRig" 
                movement-controls="constrainToNavMesh: false" 
                thumbstick-controls
                position="0 0 0">
        <a-entity id="head" camera look-controls position="0 1.6 0">
            <a-entity 
              cursor="fuse: false; rayOrigin: mouse" 
              raycaster="objects: .clickable">
            </a-entity>
        </a-entity>
        <a-entity id="leftHand" hand-controls="hand: left" thumbstick-move teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: trigger"></a-entity>
        <a-entity id="rightHand" hand-controls="hand: right" thumbstick-jump laser-controls="hand: right" raycaster="objects: .clickable"></a-entity>
      </a-entity>
      
      <!-- Large ground plane for the scene -->
      <a-plane rotation="-90 0 0" width="200" height="200" repeat="50 50" id="ground" src="Ground/Cobblestone A.jpg"></a-plane>

      <!-- Sky background image -->
      <a-assets>
        <img id="sky1" src="Sky/golden_gate_hills_2k.jpg">
        <img id="sky2" src="Sky/satara_night_2k.jpg">
      </a-assets>
      <a-sky id="sky" src="#sky1"></a-sky>
      <a-entity id="ambientLight" light="type: ambient; color: #fff; intensity: 1"></a-entity>

      <!-- Adventurer character model -->
      <a-entity id="adventurer" gltf-model="Assets/City_Pack/Adventurer.glb" 
        class="clickable" scale="1.2 1.2 1.2" position="-5 0 -10" rotation="0 45 0"
        sound="src: url(SFX/welcome.mp3); on: mouseenter; positional: true" volume="1">
      </a-entity>

      <!-- Enemy 1 - Wasp flying in a circle (animated) -->
      <!-- Parent entity rotates, child wasp moves in a circle -->
      <a-entity rotation="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
        <a-entity id="Wasp" gltf-model="Assets/Animated_Enemies/Wasp.glb" 
          animation-mixer="clip: WaspArmature|Wasp_Flying; loop: repeat"
          position="5 0 0" rotation="0 90 0" class="clickable"
          sound="src: url(SFX/wasp.wav); autoplay: true; loop: true; maxDistance: 10; positional: true; volume: 1">
        </a-entity>
      </a-entity>

      <!-- Animated frog that jumps back and forth -->
      <a-entity id="Frog" gltf-model="Assets/Animated_Enemies/Frog.glb"
        animation-mixer="clip: *Jump; loop: repeat"
        position="5 0 0" rotation="0 -90 0" scale="0.2 0.2 0.2"
        sound="src: url(SFX/frog2.mp3); autoplay: true; loop: true; maxDistance: 10; positional: true; volume: 1"
        animation__1="property: position; to: -5 0 0; dur: 5000; easing: linear; startEvents: animationcomplete__4"
        animation__2="property: rotation; to: 0 90 0; dur: 3500; startEvents: animationcomplete__1"
        animation__3="property: position; to: 5 0 0; dur: 5000; easing: linear; startEvents: animationcomplete__2"
        animation__4="property: rotation; to: 0 -90 0; dur: 3500; startEvents: loaded, animationcomplete__3">
      </a-entity>

      <!-- Car model: grows when hovered, spins when clicked -->
      <a-entity id="car" 
        gltf-model="Assets/City_Pack/Car-unqqkULtRU.glb"
        class="clickable" position="0 0 -10" scale="1.5 1.5 1.5" rotation="0 90 0"
        sound="src: url(SFX/dontlook.mp3); on: mouseenter; positional: true"
        event-set__enter="_event: mouseenter; scale: 1.6 1.6 1.6"
        event-set__leave="_event: mouseleave; scale: 1.5 1.5 1.5"
        event-set__click="_event: click; rotation: 0 180 0">
      </a-entity>
 
      <!-- Button 1 -->
      <a-box class="clickable" position="0.5 1.5 -3" depth="0.2" height="0.5" width="0.5" color="#4CAF50" material="emissive: #ffff00; emissiveIntensity: 1"
        event-set__click="_target: #sky; src: #sky1"
        event-set__click2="_event: click; _target: #ambientLight; light.intensity: 1"
        sound="src: url(SFX/unlock.wav); on: click; positional: true">
      </a-box>

      <!-- Button 2 -->
      <a-box class="clickable" position="1 1.5 -3" depth="0.2" height="0.5" width="0.5" material="emissive: #000088; emissiveIntensity: 1"
        event-set__click="_target: #sky; src: #sky2"
        event-set__click2="_event: click; _target: #ambientLight; light.intensity: 0.3"
        sound="src: url(SFX/unlock.wav); on: click; positional: true">
      </a-box>

      <!-- House model -->
      <a-entity id="house" gltf-model="Assets/House.glb"
        scale="12 12 12" position="10 0 -10" rotation="0 -80 0">
      </a-entity>

      <!-- Forest scene (large background model) -->
      <a-entity id="forest" gltf-model="Assets/Nature.glb"
        scale="100 100 100" position="-25 5 -100" rotation="0 0 0">
      </a-entity>

      <!-- Wind chimes with sound -->
      <a-entity id="windchimes" gltf-model="Assets/Wind_Chimes.glb"
        sound="src: url(SFX/wind_chimes.mp3); autoplay: true; loop: true; maxDistance: 20; positional: true; volume: 1"
        scale="0.1 0.1 0.1" position="7.5 2.5 -9" rotation="0 -80 0">
      </a-entity>
    </a-scene>
  </body>
</html>
